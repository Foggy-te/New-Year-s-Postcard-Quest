<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ó–∞–¥–∞–Ω–∏—è —Å —à–∏—Ñ—Ä–æ–≤–∫–æ–π</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="quest-style.css">
  <style>
    #target {
      position: absolute;
      font-size: 6rem; /* –ö—Ä—É–ø–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–ª–∞—Ç—å—è */
      cursor: pointer;
      display: none;
      transition: all 0.2s ease; /* –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ */
    }

    .message {
      font-size: 1.5rem;
      font-weight: bold;
      color: #4CAF50;
      display: none; /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ */
    }

    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    #modal-box {
      display: none;
      text-align: center;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 30px;
      border-radius: 10px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
      text-align: center;
      font-size: 1.5rem;
    }

    #modal-box p {
      font-size: 2rem;
      font-weight: bold;
      color: #FFD700; /* –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç */
    }

    .next-button {
      margin-top: 20px;
      font-size: 1.2rem;
      background-color: #28a745;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }

    .next-button:hover {
      background-color: #218838;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
    #modal-box .animate {
      animation: fadeIn 1s ease-out;
    }

    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div class="container text-center py-5 text-white" >
    <h1 class="display-4">–ó–∞–¥–∞–Ω–∏—è —Å —à–∏—Ñ—Ä–æ–≤–∫–æ–π</h1>

    <!-- –ó–∞–¥–∞–Ω–∏—è -->
    <div class="mt-4">
      <!-- –ó–∞–¥–∞–Ω–∏–µ 1 -->
      <div id="task1">
        <p class="fs-4">–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ 1: <span class="encrypted-word">üéÖüéÑ‚ùÑÔ∏è‚ùÑÔ∏èüéÅ‚ù§Ô∏è</span></p>
        <p class="fs-5">–ü–æ–¥—Å–∫–∞–∑–∫–∞: "–ö–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª ‚Äî —ç—Ç–æ –±—É–∫–≤–∞. –ù–∞–π–¥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∏–∂–µ –∏ —Ä–∞—Å—à–∏—Ñ—Ä—É–π —Å–ª–æ–≤–æ."</p>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ -->
        <div class="table-responsive w-50 mx-auto">
          <table class="table table-bordered text-white">
            <thead>
              <tr>
                <th scope="col">üéÖ</th>
                <th scope="col">üéÑ</th>
                <th scope="col">‚ùÑÔ∏è</th>
                <th scope="col">üéÅ</th>
                <th scope="col">‚ù§Ô∏è</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>H</td>
                <td>A</td>
                <td>P</td>
                <td>Y</td>
                <td>!</td>
              </tr>
            </tbody>
          </table>
        </div>

        <form onsubmit="return checkAnswer('happy!', 'task1')">
          <input id="answer1" type="text" class="form-control w-50 mx-auto my-3" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç" required>
          <button type="submit" class="btn btn-primary btn-lg mt-3">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
        </form>
        <p id="error-message1" class="text-danger mt-3" style="display: none;">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç! –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!</p>
      </div>

      <!-- –ó–∞–¥–∞–Ω–∏–µ 2 -->
      <div id="task2" style="display: none;">
        <p class="fs-4">–ó–∞–¥–∞–Ω–∏–µ: –°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ –∏–∑ —Ö–∞–æ—Å–∞!</p>
        <p class="fs-5">–ü–æ–¥—Å–∫–∞–∑–∫–∞: "–°—Ä–µ–¥–∏ —Ö–∞–æ—Å–∞ –µ—Å—Ç—å —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Å–≤—è–∑—ã–≤–∞–µ—Ç –Ω–∞—Å."</p>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏ -->
        <div id="letters-container" class="d-flex flex-wrap justify-content-center mb-4">
          <!-- –ü–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ –±—É–∫–≤—ã (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –ª–∏—à–Ω–∏–µ) -->
          <div class="draggable-letter text-center mx-2" draggable="true">V</div>
          <div class="draggable-letter text-center mx-2" draggable="true">E</div>
          <div class="draggable-letter text-center mx-2" draggable="true">L</div>
          <div class="draggable-letter text-center mx-2" draggable="true">Z</div>
          <div class="draggable-letter text-center mx-2" draggable="true">Q</div>
          <div class="draggable-letter text-center mx-2" draggable="true">X</div>
          <div class="draggable-letter text-center mx-2" draggable="true">B</div>
          <div class="draggable-letter text-center mx-2" draggable="true">O</div>
          <div class="draggable-letter text-center mx-2" draggable="true">!</div>
          <div class="draggable-letter text-center mx-2" draggable="true">#</div>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è —Å–±–æ—Ä–∫–∏ —Å–ª–æ–≤–∞ -->
        <div id="drop-zone" class="border border-white p-3 text-white" style="min-height: 50px;">
          –ü–µ—Ä–µ—Ç–∞—â–∏ –±—É–∫–≤—ã —Å—é–¥–∞...
        </div>

        <button class="btn btn-primary btn-lg mt-3" onclick="checkTask2()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
        <p id="error-message2" class="text-danger mt-3" style="display: none;">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!</p>
      </div>

      <script>
        const lettersContainer = document.getElementById('letters-container');
        const dropZone = document.getElementById('drop-zone');
        let draggedLetter = null;

        // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –±—É–∫–≤—ã
        document.querySelectorAll('.draggable-letter').forEach(letter => {
          letter.addEventListener('dragstart', (e) => {
            draggedLetter = e.target;
          });

          letter.addEventListener('dragend', () => {
            draggedLetter = null;
          });
        });

        // –ó–æ–Ω–∞, –∫—É–¥–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç –±—É–∫–≤—ã
        dropZone.addEventListener('dragover', (e) => {
          e.preventDefault();
        });

        dropZone.addEventListener('drop', (e) => {
          e.preventDefault();
          if (draggedLetter) {
            dropZone.appendChild(draggedLetter); // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –±—É–∫–≤—ã –≤ –∑–æ–Ω—É
          }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        function checkTask2() {
          const lettersInDropZone = Array.from(dropZone.children).map(letter => letter.textContent).join('');
          const correctAnswer = 'LOVE';
          if (lettersInDropZone === correctAnswer) {
            triggerConfetti();
            setTimeout(() => {
              document.getElementById('task2').style.display = 'none';
              document.getElementById('task3').style.display = 'block';
            }, 2000);
          } else {
            document.getElementById('error-message2').style.display = 'block';
          }
        }
      </script>

      <!-- –ó–∞–¥–∞–Ω–∏–µ 3 -->
      <div id="task3" style="display: none;">
        <p class="fs-4">–ó–∞–¥–∞–Ω–∏–µ: –°–æ–±–µ—Ä–∏ —Å–ª–æ–≤–æ –∏–∑ –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã—Ö –±—É–∫–≤!</p>
        <p class="fs-5">–ü–æ–¥—Å–∫–∞–∑–∫–∞: "–ú–µ–Ω—è–π –º–µ—Å—Ç–∞–º–∏ –±—É–∫–≤—ã, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –æ–∑–Ω–∞—á–∞–µ—Ç –º–µ—á—Ç—É."</p>

        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <div id="puzzle-container" class="d-flex justify-content-center flex-wrap mb-4" style="max-width: 300px; margin: auto;">
          <!-- –ë—É–∫–≤—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <button class="btn btn-primary btn-lg mt-3" onclick="checkTask3()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
        <p id="error-message3" class="text-danger mt-3" style="display: none;">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫! –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!</p>
      </div>

      <script>
        const correctWord = "DREAM";
        const letters = correctWord.split(""); // –†–∞–∑–¥–µ–ª—è–µ–º —Å–ª–æ–≤–æ –Ω–∞ –±—É–∫–≤—ã
        const shuffledLetters = letters.sort(() => Math.random() - 0.5); // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –±—É–∫–≤—ã

        const puzzleContainer = document.getElementById("puzzle-container");

        // –°–æ–∑–¥–∞—ë–º –±—É–∫–≤—ã
        shuffledLetters.forEach((letter, index) => {
          const letterDiv = document.createElement("div");
          letterDiv.textContent = letter;
          letterDiv.classList.add("puzzle-letter", "text-center", "border", "border-white", "mx-1", "my-1", "text-white");
          letterDiv.style.width = "50px";
          letterDiv.style.height = "50px";
          letterDiv.style.lineHeight = "50px";
          letterDiv.style.cursor = "pointer";
          letterDiv.style.backgroundColor = "#444";
          letterDiv.dataset.index = index; // –ò–Ω–¥–µ–∫—Å –±—É–∫–≤—ã

          // –°–æ–±—ã—Ç–∏–µ –Ω–∞ –∫–ª–∏–∫: –≤—ã–±–∏—Ä–∞–µ–º –±—É–∫–≤—ã –¥–ª—è –æ–±–º–µ–Ω–∞
          letterDiv.addEventListener("click", () => selectLetter(letterDiv));
          puzzleContainer.appendChild(letterDiv);
        });

        let firstSelectedLetter = null;

        function selectLetter(letterDiv) {
          // –ï—Å–ª–∏ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –±—É–∫–≤—ã
          if (!firstSelectedLetter) {
            firstSelectedLetter = letterDiv;
            letterDiv.style.backgroundColor = "#28a745"; // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –±—É–∫–≤—É
          } else {
            // –ú–µ–Ω—è–µ–º –±—É–∫–≤—ã –º–µ—Å—Ç–∞–º–∏
            const temp = firstSelectedLetter.textContent;
            firstSelectedLetter.textContent = letterDiv.textContent;
            letterDiv.textContent = temp;

            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ
            firstSelectedLetter.style.backgroundColor = "#444";
            firstSelectedLetter = null;
          }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å
        function checkTask3() {
          const currentWord = Array.from(document.querySelectorAll(".puzzle-letter"))
            .map(letter => letter.textContent)
            .join("");

          if (currentWord === correctWord) {
            triggerConfetti();
            setTimeout(() => {
              document.getElementById("task3").style.display = "none";
              document.getElementById("task4").style.display = "block";
            }, 2000);
          } else {
            document.getElementById("error-message3").style.display = "block";
          }
        }
      </script>


      <!-- –ó–∞–¥–∞–Ω–∏–µ 4 -->
      <div id="task4" style="display: none;">
        <p class="fs-4">–ó–∞–¥–∞–Ω–∏–µ: –ù–∞–π–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª!</p>
        <p class="fs-5">–ü–æ–¥—Å–∫–∞–∑–∫–∞: "–í—ã–±–µ—Ä–∏ —Å–∏–º–≤–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–∑–Ω–∞—á–∞–µ—Ç –≤–µ—Ä–Ω–æ—Å—Ç—å –∏ –≤–µ—á–Ω–æ—Å—Ç—å."</p>

        <!-- –≠–º–æ–¥–∑–∏ -->
        <div id="emoji-container" class="d-flex flex-wrap justify-content-center mb-4" style="max-width: 600px; margin: auto; font-size: 3rem;">
          <!-- –≠–º–æ–¥–∑–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <p id="error-message4" class="text-danger mt-3" style="display: none;">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä! –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.</p>
      </div>

      <script>
        const emojiContainer = document.getElementById("emoji-container");

        // –°–ø–∏—Å–æ–∫ —ç–º–æ–¥–∑–∏ —Å –æ—Ç–≤–µ—Ç–∞–º–∏
        const emojis = [
          { symbol: "‚ùÑÔ∏è", isCorrect: false },
          { symbol: "üíç", isCorrect: true }, // –°–∏–º–≤–æ–ª –≤–µ—Ä–Ω–æ—Å—Ç–∏ ‚Äî –∫–æ–ª—å—Ü–æ
          { symbol: "üéÅ", isCorrect: false },
          { symbol: "‚≠ê", isCorrect: false },
          { symbol: "‚ù§Ô∏è", isCorrect: false }
        ];

        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —ç–º–æ–¥–∑–∏
        emojis.forEach((emoji) => {
          const emojiElement = document.createElement("div");
          emojiElement.textContent = emoji.symbol;
          emojiElement.classList.add("emoji-choice", "m-3", "text-center");
          emojiElement.style.cursor = "pointer";
          emojiElement.style.border = "2px solid white";
          emojiElement.style.borderRadius = "8px";
          emojiElement.style.width = "80px";
          emojiElement.style.height = "80px";
          emojiElement.style.lineHeight = "80px";
          emojiElement.style.backgroundColor = "#444";

          // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ —ç–º–æ–¥–∑–∏
          emojiElement.addEventListener("click", () => {
            if (emoji.isCorrect) {
              emojiElement.style.borderColor = "green";
              triggerConfetti();
              setTimeout(() => {
                document.getElementById("task4").style.display = "none";
                document.getElementById("task5").style.display = "block";
              }, 2000);
            } else {
              emojiElement.style.borderColor = "red";
              document.getElementById("error-message4").style.display = "block";
            }
          });

          emojiContainer.appendChild(emojiElement);
        });
      </script>

      <div id="task5" style="display: none;">
        <p class="fs-5">–ü–æ–¥—Å–∫–∞–∑–∫–∞: "–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–ª—å—Ü–æ, –∫–æ—Ç–æ—Ä–æ–µ —É–±–µ–≥–∞–µ—Ç –æ—Ç —Ç–µ–±—è!"</p>

        <!-- –≠–º–æ–¥–∑–∏ –ø–ª–∞—Ç—å—è -->
        <div id="target">üíç</div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <p id="message" class="message">–¢—ã –ø–æ–π–º–∞–ª–∞ –∫–æ–ª—å—Ü–æ! –ú–æ–ª–æ–¥–µ—Ü!</p>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
        <div id="modal-box">
          <p>–û–±–µ—Ä–Ω–∏—Å—å!</p>
          <button class="next-button" onclick="finishTask()">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É</button>
        </div>

        <button class="btn btn-primary btn-lg mt-3" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
      </div>

      <script src="https://cdn.jsdelivr.net/npm/canvas-confetti"></script>

      <script>
        const target = document.getElementById("target");
        const message = document.getElementById("message");
        const modalBox = document.getElementById("modal-box");

        let gameStarted = false;
        let targetVisible = false;

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
          if (!gameStarted) {
            gameStarted = true;
            message.style.display = "none"; // –ü—Ä—è—á–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            modalBox.style.display = "none"; // –°–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            target.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª—å—Ü–æ
            moveTarget(); // –î–≤–∏–≥–∞–µ–º –∫–æ–ª—å—Ü–æ
          }
        }

        // –î–≤–∏–≥–∞–µ–º –ø–ª–∞—Ç—å–µ –ø–æ —ç–∫—Ä–∞–Ω—É
        function moveTarget() {
          const maxX = window.innerWidth - target.offsetWidth;
          const maxY = window.innerHeight - target.offsetHeight;

          // –°–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –ø–ª–∞—Ç—å—è
          const randomX = Math.floor(Math.random() * maxX);
          const randomY = Math.floor(Math.random() * maxY);

          target.style.left = `${randomX}px`;
          target.style.top = `${randomY}px`;

          // –ü–ª–∞—Ç—å–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏ –¥–≤–∏–≥–∞—Ç—å—Å—è —Å–ª—É—á–∞–π–Ω–æ
          targetVisible = true;

          // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É –±—É–¥–µ–º —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –ø–ª–∞—Ç—å–µ
          setTimeout(() => {
            if (targetVisible) {
              moveTarget(); // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–≤–∏–≥–∞—Ç—å –ø–ª–∞—Ç—å–µ
            }
          }, 500);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–ª–∏–∫ –ø–æ –ø–ª–∞—Ç—å—é
        target.addEventListener("click", () => {
          if (targetVisible) {
            targetVisible = false;
            target.style.display = "none"; // –ö–æ–ª—å—Ü–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –º–µ—Å—Ç–µ
            message.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
            triggerConfetti(); // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
            showModal(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
          }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function triggerConfetti() {
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function showModal() {
          modalBox.classList.add("animate"); // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
          modalBox.style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∫–≤–µ—Å—Ç
        function finishTask() {
          window.location.href = "question4.html"; // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É
        }
      </script>
  <!-- –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä -->
  <div id="music-player" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
    <button id="toggle-music" class="btn btn-primary">üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
  </div>
  
  <script>
    const audio = new Audio("mp3/ereymusic ‚Äî Christmas Lofi Hip Hop (www.lightaudio.ru).mp3"); // –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É –º—É–∑—ã–∫–∞–ª—å–Ω–æ–º—É —Ñ–∞–π–ª—É
    audio.loop = true;
  
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage
    if (localStorage.getItem("music-playing") === "true") {
      audio.play();
      document.getElementById("toggle-music").textContent = "‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É";
    }
  
    // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∏
    document.getElementById("toggle-music").addEventListener("click", () => {
      if (audio.paused) {
        audio.play();
        localStorage.setItem("music-playing", "true");
        document.getElementById("toggle-music").textContent = "‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É";
      } else {
        audio.pause();
        localStorage.setItem("music-playing", "false");
        document.getElementById("toggle-music").textContent = "üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
      }
    });
  
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
    window.addEventListener("beforeunload", () => {
      localStorage.setItem("music-time", audio.currentTime);
    });
  
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞
    const savedTime = localStorage.getItem("music-time");
    if (savedTime) {
      audio.currentTime = parseFloat(savedTime);
    }
  </script>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ particles.min.js -->
  <script src="js/particles.min.js"></script>
  <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–Ω–µ–≥–∞ -->
  <script src="js/particles-config.js"></script>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti"></script>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞
    function checkAnswer(correctAnswer, taskId) {
      const userAnswer = document.getElementById("answer" + taskId.charAt(taskId.length - 1)).value.trim().toLowerCase();
      if (userAnswer === correctAnswer) {
        triggerConfetti();
        setTimeout(() => {
          document.getElementById(taskId).style.display = "none";
          const nextTask = 'task' + (parseInt(taskId.charAt(taskId.length - 1)) + 1);
          const nextTaskElement = document.getElementById(nextTask);

          if (nextTaskElement) {
            nextTaskElement.style.display = "block";
          } else {
            // –ï—Å–ª–∏ –±–æ–ª—å—à–µ –∑–∞–¥–∞–Ω–∏–π –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º task5
            document.getElementById("task5").style.display = "block";
            document.getElementById("moving-word").style.display = "block"; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ–≤–æ
          }
        }, 2000);
        return false;
      } else {
        document.getElementById("error-message" + taskId.charAt(taskId.length - 1)).style.display = "block";
        return false;
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    function triggerConfetti() {
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 }
      });
    }

  </script>
</body>
</html>
