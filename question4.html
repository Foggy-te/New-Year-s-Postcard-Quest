<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–≤–µ—Å—Ç —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="quest-style.css">
  <link rel="stylesheet" href="js/particles.css">
  <style>
    /* –¢–∞–π–º–ª–∞–π–Ω */
    .timeline {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }
    .timeline-item {
      background-color: #007bff;
      color: white;
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .timeline-item.disabled {
      background-color: gray;
      cursor: not-allowed;
    }

    #modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.75); /* –¢—ë–º–Ω—ã–π —Ñ–æ–Ω */
    z-index: 1000;
  }

  .modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #2c2c2c; /* –õ–∞–∫–æ–Ω–∏—á–Ω—ã–π —Ç—ë–º–Ω–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
    color: white; /* –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç */
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    max-width: 600px;
    text-align: center;
  }
    #confetti-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* –ß—Ç–æ–±—ã canvas –Ω–µ –º–µ—à–∞–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é */
      z-index: 10;
    }
    .modal-content img {
      width: 150px; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–æ—Ç–æ */
      height: 150px;
      margin: 10px;
      border-radius: 10px;
      cursor: pointer;
      object-fit: cover;
      transition: all 0.3s;
    }
    .modal-content img.disabled {
      filter: grayscale(100%);
      pointer-events: none;
    }

    #next-quest {
      margin-top: 20px;
      display: none;
    }
    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }
  </style>
</head>
<body>
    <div id="particles-js"></div>
  <div class="container text-center">
    <h1 class="mt-4">–ö–≤–µ—Å—Ç —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏</h1>
    <p>–í—ã–±–µ—Ä–∏ –º–µ—Å—è—Ü, —É–≥–∞–¥–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ –∏ –ø—Ä–æ–π–¥–∏ –≤–µ—Å—å –≥–æ–¥!</p>
    <div class="alert alert-info" role="alert">
      –≠—Ç–æ—Ç –∫–≤–µ—Å—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 12 —ç—Ç–∞–ø–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–µ—Å—è—Ü—É –≥–æ–¥–∞. –í –∫–∞–∂–¥–æ–º –º–µ—Å—è—Ü–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç—Ä–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç—É, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —ç—Ç–æ–º—É –º–µ—Å—è—Ü—É. –ü–æ–ø—Ä–æ–±—É–π –ø—Ä–æ–π—Ç–∏ –≤–µ—Å—å –≥–æ–¥ –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É.
    </div>
    <!-- –¢–∞–π–º–ª–∞–π–Ω -->
    <div class="timeline" id="timeline">
      <div class="timeline-item" data-month="january">–Ø–Ω–≤–∞—Ä—å</div>
      <div class="timeline-item" data-month="february">–§–µ–≤—Ä–∞–ª—å</div>
      <div class="timeline-item" data-month="march">–ú–∞—Ä—Ç</div>
      <div class="timeline-item" data-month="april">–ê–ø—Ä–µ–ª—å</div>
      <div class="timeline-item" data-month="may">–ú–∞–π</div>
      <div class="timeline-item" data-month="june">–ò—é–Ω—å</div>
      <div class="timeline-item" data-month="july">–ò—é–ª—å</div>
      <div class="timeline-item" data-month="august">–ê–≤–≥—É—Å—Ç</div>
      <div class="timeline-item" data-month="september">–°–µ–Ω—Ç—è–±—Ä—å</div>
      <div class="timeline-item" data-month="october">–û–∫—Ç—è–±—Ä—å</div>
      <div class="timeline-item" data-month="november">–ù–æ—è–±—Ä—å</div>
      <div class="timeline-item" data-month="december">–î–µ–∫–∞–±—Ä—å</div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="photo-modal" class="modal">
      <div class="modal-content">
        <canvas id="confetti-canvas"></canvas> <!-- –ö–∞–Ω–≤–∞—Å –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ -->
        <h3 id="modal-title">–í—ã–±–µ—Ä–∏ —Ñ–æ—Ç–æ –∏–∑ –º–µ—Å—è—Ü–∞</h3>
        <div id="photo-gallery"></div>
        <p id="feedback" class="mt-3"></p>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ -->
    <a href="question5.html" id="next-quest" class="btn btn-success">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–≤–µ—Å—Ç—É</a>
  </div>
  <!-- –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä -->
  <div id="music-player" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
    <button id="toggle-music" class="btn btn-primary">üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>
  </div>
  
  <script>
    const audio = new Audio("mp3/ereymusic ‚Äî Christmas Lofi Hip Hop (www.lightaudio.ru).mp3"); // –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –≤–∞—à–µ–º—É –º—É–∑—ã–∫–∞–ª—å–Ω–æ–º—É —Ñ–∞–π–ª—É
    audio.loop = true;
  
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage
    if (localStorage.getItem("music-playing") === "true") {
      audio.play();
      document.getElementById("toggle-music").textContent = "‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É";
    }
  
    // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º—É–∑—ã–∫–∏
    document.getElementById("toggle-music").addEventListener("click", () => {
      if (audio.paused) {
        audio.play();
        localStorage.setItem("music-playing", "true");
        document.getElementById("toggle-music").textContent = "‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É";
      } else {
        audio.pause();
        localStorage.setItem("music-playing", "false");
        document.getElementById("toggle-music").textContent = "üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É";
      }
    });
  
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
    window.addEventListener("beforeunload", () => {
      localStorage.setItem("music-time", audio.currentTime);
    });
  
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞
    const savedTime = localStorage.getItem("music-time");
    if (savedTime) {
      audio.currentTime = parseFloat(savedTime);
    }
  </script>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    const photos = {
        january: ["photos/march2.jpg", "photos/january1.jpg", "photos/november3.jpg"], // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: january1
        february: ["photos/june3.jpg", "photos/february1.jpg", "photos/april1.jpg"], // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: february1
        march: ["photos/july1.jpg", "photos/september2.jpg", "photos/march3.jpg"],    // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: march3
        april: ["photos/april3.jpg", "photos/october1.jpg", "photos/april1.jpg"],   // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: april1
        may: ["photos/april1.jpg", "photos/february2.jpg", "photos/may3.jpg"],        // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: may3
        june: ["photos/september2.jpg", "photos/june1.jpg", "photos/march1.jpg"],   // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: june1
        july: ["photos/september3.jpg", "photos/may1.jpg", "photos/july3.jpg"],          // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: july3
        august: ["photos/october1.jpg", "photos/june2.jpg", "photos/august3.jpg"],   // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: august3
        september: ["photos/november1.jpg", "photos/august3.jpg", "photos/september1.jpg"], // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: september1
        october: ["photos/october1.jpg", "photos/august2.jpg", "photos/june1.jpg"],         // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: october1
        november: ["photos/january3.jpg", "photos/march2.jpg", "photos/november1.jpg"],     // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: november1
        december: ["photos/june3.jpg", "photos/december1.jpg", "photos/february3.jpg"],        // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è: december1
    };


    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
    const correctAnswers = {
        january: "photos/january1.jpg",
        february: "photos/february1.jpg",
        march: "photos/march3.jpg",
        april: "photos/april1.jpg",
        may: "photos/may3.jpg",
        june: "photos/june1.jpg",
        july: "photos/july3.jpg",
        august: "photos/august3.jpg",
        september: "photos/september1.jpg",
        october: "photos/october1.jpg",
        november: "photos/november1.jpg",
        december: "photos/december1.jpg",
    };

    const completedMonths = {};

    function showPhotos(month) {
  if (completedMonths[month]) return; // –ï—Å–ª–∏ –º–µ—Å—è—Ü –∑–∞–≤–µ—Ä—à—ë–Ω, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
  const gallery = document.getElementById("photo-gallery");
  const feedback = document.getElementById("feedback");

  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≥–∞–ª–µ—Ä–µ—é –∏ —Ç–µ–∫—Å—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
  gallery.innerHTML = "";
  feedback.innerText = ""; // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

  // –°–æ–∑–¥–∞—ë–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  photos[month].forEach((photo) => {
    const img = document.createElement("img");
    img.src = photo;
    img.onclick = (e) => checkAnswer(month, photo, img, e); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç –ø—Ä–∏ –∫–ª–∏–∫–µ
    gallery.appendChild(img);
  });

  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  document.getElementById("modal-title").innerText = `–í—ã–±–µ—Ä–∏ —Ñ–æ—Ç–æ –∏–∑ –º–µ—Å—è—Ü–∞`;
  document.getElementById("photo-modal").style.display = "flex";
}

function checkAnswer(month, photo, img, event) {
  const feedback = document.getElementById("feedback");

  if (photo === correctAnswers[month]) {
    feedback.innerText = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
    feedback.style.color = "green";

    // –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    triggerConfetti(event.clientX, event.clientY);

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –æ—Ç–º–µ—á–∞–µ–º –º–µ—Å—è—Ü –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º
    setTimeout(() => {
      closeModal();
      markMonthAsComplete(month);
    }, 2000);
  } else {
    feedback.innerText = "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.";
    feedback.style.color = "red";

    // –î–µ–ª–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º
    img.classList.add("disabled");
    img.onclick = null; // –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
  }
}

function closeModal() {
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  document.getElementById("photo-modal").style.display = "none";
}

function markMonthAsComplete(month) {
  const monthButton = document.querySelector(`.timeline-item[data-month="${month}"]`);
  monthButton.classList.add("disabled"); // –î–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
  completedMonths[month] = true;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–≤–µ—Ä—à–µ–Ω—ã –ª–∏ –≤—Å–µ –º–µ—Å—è—Ü—ã
  if (Object.keys(completedMonths).length === Object.keys(correctAnswers).length) {
    document.getElementById("next-quest").style.display = "block";
  }
}

function triggerConfetti(x, y) {
  const canvas = document.getElementById("confetti-canvas");
  const confettiInstance = confetti.create(canvas, { resize: true, useWorker: true });

  // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏–∑ –º–µ—Å—Ç–∞ –∫–ª–∏–∫–∞
  confettiInstance({
    particleCount: 100,
    spread: 120,
    origin: { x: x / window.innerWidth, y: y / window.innerHeight },
  });
}

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –Ω–∞ —Ç–∞–π–º–ª–∞–π–Ω–µ
document.querySelectorAll(".timeline-item").forEach((button) =>
  button.addEventListener("click", () => showPhotos(button.dataset.month))
);
  </script>
      <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ particles.min.js -->
      <script src="js/particles.min.js"></script>
      <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–Ω–µ–≥–∞ -->
      <script src="js/particles-config.js"></script>
</body>
</html>
